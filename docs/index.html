<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZLockCore — Vault Manager</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
            color: #222;
        }
        header {
            background: #1a1a1a;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #langSwitch {
            cursor: pointer;
            background: #333;
            padding: 8px 14px;
            border-radius: 6px;
            user-select: none;
        }
        #content {
            max-width: 900px;
            margin: auto;
            padding: 20px;
            background: white;
            margin-top: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        pre {
            background: #fff;
            padding: 12px;
            overflow-x: auto;
            border-radius: 6px;
            border: 1px solid #e6e6e6;
            white-space: pre-wrap;
            word-break: break-word;
        }
        a { color: #0366d6; }
    </style>
</head>
<body>

<header>
    <h2>ZLockCore — Vault Manager</h2>
    <div id="langSwitch">HU</div>
</header>

<div id="content">
    <p>Loading README files…</p>
</div>

<script>
    // Utility: simple HTML-escape
    function escapeHtml(s) {
        return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    // Convert markdown [text](url) and plain URLs into clickable anchors while preserving the exact visible text
    function makeClickableMarkdown(md) {
        const anchors = [];
        // store anchors as placeholders so we can escape the rest safely
        md = md.replace(/\[([^\]]+)\]\((https?:\/\/[^\s)]+)\)/g, function(_, text, url){
            const display = '[' + text + '](' + url + ')';
            const id = '__ANCHOR' + anchors.length + '__';
            anchors.push('<a href="' + url + '" target="_blank" rel="noopener noreferrer">' + escapeHtml(display) + '</a>');
            return id;
        });
        md = md.replace(/(https?:\/\/[^\s)]+)/g, function(_, url){
            const id = '__ANCHOR' + anchors.length + '__';
            anchors.push('<a href="' + url + '" target="_blank" rel="noopener noreferrer">' + escapeHtml(url) + '</a>');
            return id;
        });
        // escape the rest
        md = escapeHtml(md);
        // reinsert anchors (their visible text has been escaped already)
        anchors.forEach(function(a, i){
            md = md.replace('__ANCHOR' + i + '__', a);
        });
        return md;
    }

    async function fetchText(path) {
        try {
            const res = await fetch(path);
            if (!res.ok) return 'ERROR: could not load ' + path + ' (status ' + res.status + ')';
            return await res.text();
        } catch (e) {
            return 'ERROR: fetch failed for ' + path + ': ' + e;
        }
    }

    const contentEl = document.getElementById('content');
    const switcher = document.getElementById('langSwitch');
    let current = 'en';
    let enText = '';
    let huText = '';

    async function load() {
        contentEl.innerHTML = '<p>Loading README files…</p>';
        [enText, huText] = await Promise.all([
            fetchText('../README.md'),
            fetchText('../README_HU.md')
        ]);
        render();
    }

    function render() {
        const enHtml = '<h3>README.md (EN)</h3><pre>' + makeClickableMarkdown(enText) + '</pre>';
        const huHtml = '<h3>README_HU.md (HU)</h3><pre>' + makeClickableMarkdown(huText) + '</pre>';
        contentEl.innerHTML = (current === 'en') ? enHtml : huHtml;
    }

    switcher.addEventListener('click', function() {
        current = (current === 'en') ? 'hu' : 'en';
        switcher.textContent = (current === 'en') ? 'HU' : 'EN';
        render();
    });

    // Start loading
    load();
</script>

</body>
</html>
        // Linkek
